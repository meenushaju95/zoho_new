{% extends 'base.html' %}
{% block content %}
{% load static %}


<style>
  .container {
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
  }
  
  /* Column styles */
  .column {
    width: 48%; /* Adjust as needed */
    margin-bottom: 20px;
  }

  /* Input field styles */
  input[type="text"],
  input[type="email"],
  input[type="date"],
  input[type="number"],
  select,
  button {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid white;
    border-radius: 4px;
    box-sizing: border-box;
    color: #fff;
    font-size: 16px;
    background-color: #000;
  }
  textarea{
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid white;
    border-radius: 4px;
    box-sizing: border-box;
    color: #fff;
    font-size: 16px;
    background-color: #000;
  }
  input[type="date"]::-webkit-calendar-picker-indicator {
      filter: invert(1); /* Invert color for the calendar icon */
    }


  /* Additional styling for select dropdown arrow */
  
   
  .btn-add {
    border: 2px solid orange;
    border-radius: 10px;
    background-color: orange;
    color: white;
    width: 80px;
    display: block;
    margin: 0 auto;
    text-align: center;
    transition: background-color 0.3s ease; /* Add smooth transition effect */
}

.btn-add:hover {
    background-color: orange;
    color: white; /* Add this line to ensure text is visible on hover */
}
table {
    border-collapse: collapse;
    width: 100%;
    margin-bottom: 20px;
  }

  th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
  }

  th {
   color: white;
  }
  .row-elements {
  display: flex;
  align-items: center;
}

.row-elements select,
.row-elements input[type="text"],
.row-elements input[type="number"] {
  flex: 1;
  margin-right: 5px; /* Adjust margin as needed */
}

.row-elements .add-item-button,
.row-elements .remove-button {
  padding: 4px 8px;
  border: 1px solid orange;
  border-radius: 5px;
  cursor: pointer;
}
#itemTable th:nth-child(1),
  #itemTable td:nth-child(1) {
    width: 30px; /* Decrease width of Index column */
  }

  #itemTable th:nth-child(2),
  #itemTable td:nth-child(2) {
    width: 200px; /* Increase width of Item column */
  }


  /* Button styles */
  
  .button-container {
    display: flex;
    justify-content: center;
    margin-top: 20px;
}

.draft-button,
.sent-button,
.cancel-button {
    border: 1px solid orange;
    border-radius: 5px;
    width: 100px;
    height: 40px;
    background-color: transparent;
    color: orange;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.draft-button:hover,
.sent-button:hover,
.cancel-button:hover {
    background-color: orange;
    color: white;
}

.table-container {
        overflow-x: auto;
    }

    
</style>
<body>
  
  <div class="body-wrapper">
    <div class="container-fluid">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="{% url 'company_dashboard' %}" class="text-warning-emphasis">Dashboard</a></li>
          
          <li class="breadcrumb-item"><a href="{% url 'challan_list' %}" class="text-warning-emphasis">All Delivery Challan</a></li>
          <li class="breadcrumb-item">New Delivery Challn</li>
          
          
        </ol>
      </nav>
      <div style="overflow-x:auto;"> 


        <div class="container-fluid bg-black" style="padding: 20px;">

         
          <h3 style="color: white;">New Delivery Challan</h3>
          {% if messages %}
          {% for message in messages %}
              <div class="alert alert-success" role="alert" style="color: orange;background-color: black;border: none;">
                  {{ message }}
              </div>
          {% endfor %}
      {% endif %}
          <form method="post" action="">
            {% csrf_token %}
            <div class="container">
              <!-- Left Column -->
              <div class="column">
                <form>
                  <label for="customerName">Customer Name*</label>
                  <select id="customerName" name="customerName">
                    <!-- Options will be populated dynamically using JavaScript -->
                  </select>
                  <button  onclick="addNewCustomer()" style="border: 1px solid orange;border-radius: 5px;width: 50px;height: 40px;">+</button><br>
            
                  <label for="customerEmail">Customer Email ID</label>
                  <input type="email" id="customerEmail" name="customerEmail" >
            
                  <label for="billingAddress">Billing Address</label>
                  <textarea id="billingAddress" name="billingAddress"></textarea><br>
                 
            
                  <label for="gstTreatment">GST Treatment</label>
                  <input type="text" id="gstTreatment" name="gstTreatment" >
            
                  <label for="gstNumber">GST Number</label>
                  <input type="text" id="gstNumber" name="gstNumber" >
                </form>
              </div>
            
              <!-- Right Column -->
              <div class="column">
                <form>
                  <label for="placeOfSupply">Place of Supply</label>
                  <select id="placeOfSupply" name="placeOfSupply">
                    <!-- Options will be populated dynamically using JavaScript -->
                  </select>
            
                  <label for="deliveryChallan">Delivery Challan</label>
                  <input type="text" id="deliveryChallan" name="deliveryChallan" oninput="updateChallanPattern()">
            
                  <label for="referenceNumber">Reference Number</label>
                  <input type="text" id="referenceNumber" name="referenceNumber" >
            
                  <label for="deliveryChallanDate">Delivery Challan Date</label>
                  <input type="date" id="deliveryChallanDate" name="deliveryChallanDate"><br>
            
                  <label for="challanType">Challan Type</label>
                  <select id="challanType" name="challanType">
                    <option value="Supply Of Liquid Gas">Supply Of Liquid Gas</option>
                    <option value="Job Work">Job Work</option>
                    <option value="Supply Of Approval">Supply Of Approval</option>
                    <option value="Others">Others</option>
                  </select>
                
              </div>
            </div>



           <div class="container">
            <div class="table-container">
    <table class="responsive-table" id="itemTable" >
        <thead>
            <tr>
                <th style="width: 50px;">Index</th>
                <th style="width: 150px;">Item</th>
                <th style="width: 150px;">HSN</th>
                <th style="width: 150px;">Quantity</th>
                <th style="width: 150px;">Rate</th>
                <th style="width: 150px;">Discount</th>
                <th style="width: 150px;">Tax</th>
                <th style="width: 150px;">Amount</th>
                <th style="width: 50px;">Action</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>
                    <div style="display: flex; align-items: center;">
                        <select name="item" style="flex: 1; width: 250%;">
                            <!-- Options will be populated dynamically using JavaScript -->
                        </select>
                        <button style="border: 1px solid orange; border-radius: 5px; width: 50px; height: 40px;">+</button>
                    </div>
                </td>
                <td><input type="text" name="hsn" style="width: 100%;background-color: black;border: 1px solid white;border-radius: 8px;"></td>
                <td><input type="number" name="quantity" style="width: 100%;background-color: black;border: 1px solid white;border-radius: 8px;"></td>
                <td><input type="number" name="rate" style="width: 100%;background-color: black;border: 1px solid white;border-radius: 8px;"></td>
                <td><input type="number" name="discount" style="width: 100%;background-color: black;border: 1px solid white;border-radius: 8px;"></td>
                <td>
                    <select name="tax" style="width: 100%;">
                        <!-- Adjust width as needed -->
                        <option value="0">0% GST</option>
                        <option value="3">3% GST</option>
                        <option value="5">5% GST</option>
                        <option value="12">12% GST</option>
                        <option value="18">18% GST</option>
                        <option value="28">28% GST</option>
                    </select>
                </td>
                <td><input type="text" name="amount" style="width: 100%;"></td>
                <td><button style="border: 1px solid orange; border-radius: 5px; width: 50px; height: 40px;" onclick="removeRow(this)">-</button></td>
            </tr>
        </tbody>
    </table>
    <button type="button" onclick="addRow()" style="border: 1px solid orange; border-radius: 5px; width: 50px; height: 40px;">+</button>
</div>
</div>
      




<div class="container mt-5">
  <!-- Left Column -->
  <div class="column">
      <label for="note">Add Note</label><br>
      <textarea id="note" name="note"></textarea><br>
      <input type="file" name="file"><br><br><br><br><br>

      <input type="checkbox" id="termsAndConditions" name="termsAndConditions" required>
<label for="termsAndConditions">Agree to Terms and Conditions</label>
  </div>

  <!-- Right Column -->
  <div class="column ">
      <h4 style="color: white;">Order Summary</h4>

      <label for="subtotal">Sub Total:</label><br>
      <input type="text" id="subtotal" name="subtotal" readonly><br>

      <label for="igst">IGST:</label><br>
      <input type="text" id="igst" name="igst" readonly><br>

      <label for="cgst">CGST:</label><br>
      <input type="text" id="cgst" name="cgst" readonly><br>

      <label for="sgst">SGST:</label><br>
      <input type="text" id="sgst" name="sgst" readonly><br>

      <label for="taxAmount">Tax Amount:</label><br>
      <input type="text" id="taxAmount" name="taxAmount" readonly><br>

      <label for="shippingCharge">Shipping Charge:</label><br>
      <input type="number" id="shippingCharge" name="shippingCharge"><br>

      <label for="adjustment">Adjustment:</label><br>
      <input type="number" id="adjustment" name="adjustment"><br>

      <label for="total">Total:</label><br>
      <input type="text" id="total" name="total" ><br>
  </div>
</div>

<div class="button-container">
  <button class="draft-button">Draft</button>
  <button class="sent-button">Sent</button>
  <button class="cancel-button">Cancel</button>
</div>

          </form>


  
  <script>
    function addRow() {
      var table = document.getElementById("itemTable").getElementsByTagName('tbody')[0];
      var newRow = table.insertRow(table.rows.length);
      var index = table.rows.length;
      var row = newRow.insertCell(0);
      var item = newRow.insertCell(1);
      var hsn = newRow.insertCell(2);
      var quantity = newRow.insertCell(3);
      var rate = newRow.insertCell(4);
      var discount = newRow.insertCell(5);
      var tax = newRow.insertCell(6);
      var amount = newRow.insertCell(7);
      var action = newRow.insertCell(8);
      row.innerHTML = index;
      item.innerHTML = '<div style="display: flex; align-items: center;"><select name="item" style="flex: 1; width: 200%;"></select><button style="border: 1px solid orange; border-radius: 5px; width: 50px; height: 40px;">+</button></div>';
      hsn.innerHTML = '<input type="text" name="hsn" style="width: 100%;">';
      quantity.innerHTML = '<input type="number" name="quantity" style="width: 100%;">';
      rate.innerHTML = '<input type="number" name="rate" style="width: 100%;">';
      discount.innerHTML = '<input type="number" name="discount" style="width: 100%;">';
      tax.innerHTML = '<select name="tax" style="width: 100%;"><option value="0">0% GST</option><option value="3">3% GST</option><option value="5">5% GST</option><option value="12">12% GST</option><option value="18">18% GST</option><option value="28">28% GST</option></select>';
      amount.innerHTML = '<input type="text" name="amount" style="width: 100%;">';
      action.innerHTML = '<button style="border: 1px solid orange; border-radius: 5px; width: 50px; height: 40px;" onclick="removeRow(this)">-</button>';
    }
  
    function removeRow(button) {
      var row = button.parentNode.parentNode;
      row.parentNode.removeChild(row);
    }
  </script>
  
</body>

{% endblock %}